<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Portafolio Oscar Mejorado</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />

<style>
  /* Reset base */
  * {
    box-sizing: border-box;
  }
  body {
  color: #ffffff; /* claro para modo oscuro */
  background: #fbffff url('https://images.unsplash.com/photo-1519389950473-47ba0277781c?auto=format&fit=crop&w=1920&q=80') no-repeat center center fixed;
  background-size: cover;
  transition: background-color 0.3s ease, color 0.3s ease;
}
body.dark {
  color: #d8d8d8; /* oscuro para modo claro */
  background: #ffffff url('https://images.unsplash.com/photo-1504384308090-c894fdcc538d?auto=format&fit=crop&w=1920&q=80') no-repeat center center fixed;
  background-size: cover;
}

a {
  color: #58a6ff;
}
body.dark a {
  color: #15803d; /* verde oscuro para modo claro */
}

nav .logo {
  color: #58a6ff;
}
body.dark nav .logo {
  color: #15803d;
}

section p, section h2, section div, section label, #score, form input, form textarea {
  color: inherit; /* que hereden el color del body */
}

.error-msg {
  color: #1b1819; /* rojo para errores en modo oscuro */
}
body.dark .error-msg {
  color: #1a1515; /* rojo más oscuro en modo claro */
}

.proyecto h3, .proyecto p {
  color: inherit;
}

.redes p {
  color: inherit;
}

.redes a {
  color: #58a6ff;
}
body.dark .redes a {
  color: #15803d;
}

/* Botón */
form button, .proyecto button, #restart-btn, #theme-toggle {
  color: #0d1117;
}
body.dark form button,
body.dark .proyecto button,
body.dark #restart-btn,
body.dark #theme-toggle {
  color: #f3f3f3;
}



  a {
    color: #58a6ff;
    text-decoration: none;
    cursor: pointer;
  }
  a:hover, a:focus {
    text-decoration: underline;
  }

  /* Scrollbar personalizada */
  ::-webkit-scrollbar {
    width: 8px;
  }
  ::-webkit-scrollbar-track {
    background: transparent;
  }
  ::-webkit-scrollbar-thumb {
    background-color: #58a6ffaa;
    border-radius: 10px;
  }
  body.dark ::-webkit-scrollbar-thumb {
    background-color: #22c55eaa;
  }

  /* Navbar */
  nav {
    position: fixed;
    top: 0; left: 0; right: 0;
    background: rgba(13,17,23,0.85);
    backdrop-filter: saturate(180%) blur(15px);
    border-bottom: 1px solid #30363d;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.8rem 1.5rem;
    z-index: 9999;
    transition: background-color 0.3s ease;
  }
  body.dark nav {
    background: rgba(255, 255, 255, 0.85);
    border-color: #a0aaba;
  }

  nav .logo {
    font-weight: 700;
    font-size: 1.6rem;
    color: #58a6ff;
  }
  body.dark nav .logo {
    color: #22c55e;
  }

  nav ul {
    list-style: none;
    display: flex;
    gap: 1.6rem;
    margin: 0; padding: 0;
  }
  nav ul li {
    font-weight: 600;
  }
  nav ul li button {
    background: none;
    border: none;
    color: inherit;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    padding: 0.2rem 0.4rem;
    transition: color 0.3s ease;
  }
  nav ul li button:hover,
  nav ul li button:focus {
    color: #79c0ff;
    outline: none;
  }
  body.dark nav ul li button:hover,
  body.dark nav ul li button:focus {
    color: #7adea2;
  }

  /* Menú hamburguesa */
  #menu-toggle {
    display: none;
    flex-direction: column;
    cursor: pointer;
    width: 26px;
    height: 22px;
    justify-content: space-between;
  }
  #menu-toggle span {
    background: #58a6ff;
    border-radius: 3px;
    height: 3px;
    width: 100%;
    transition: background-color 0.3s ease;
  }
  body.dark #menu-toggle span {
    background: #22c55e;
  }

  /* Navbar responsive */
  @media (max-width: 768px) {
    nav ul {
      position: fixed;
      top: 56px;
      right: 0;
      background: rgba(13,17,23,0.95);
      backdrop-filter: saturate(180%) blur(15px);
      height: calc(100% - 56px);
      width: 220px;
      flex-direction: column;
      padding: 2rem 1.2rem;
      transform: translateX(100%);
      transition: transform 0.3s ease;
      border-left: 1px solid #30363d;
    }
    body.dark nav ul {
      background: rgba(240,244,248,0.95);
      border-color: #a0aaba;
    }
    nav ul.active {
      transform: translateX(0);
    }
    nav ul li {
      margin-bottom: 1.8rem;
    }
    #menu-toggle {
      display: flex;
    }
  }

  /* Contenedor principal */
  main {
    max-width: 900px;
    margin: 6rem auto 3rem;
    padding: 0 1.5rem;
  }

  /* Secciones */
  section {
    margin-bottom: 5rem;
    opacity: 0;
    transform: translateY(25px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }
  section.visible {
    opacity: 1;
    transform: translateY(0);
  }
  section h2 {
    font-size: 2.8rem;
    border-bottom: 3px solid #58a6ff;
    padding-bottom: 0.5rem;
    margin-bottom: 1.8rem;
  }
  body.dark section h2 {
    border-color: #22c55e;
  }

  /* Sobre mí */
  #sobre p {
    font-size: 1.15rem;
    line-height: 1.7;
    max-width: 650px;
  }

  /* Habilidades */
  .skill {
    margin-bottom: 1.3rem;
  }
  .skill-label {
    font-weight: 700;
    margin-bottom: 0.5rem;
    font-size: 1.1rem;
  }
  .skill-bar {
    background: #30363d;
    border-radius: 10px;
    overflow: hidden;
    height: 22px;
    width: 100%;
    max-width: 650px;
  }
  body.dark .skill-bar {
    background: #a0aaba44;
  }
  .skill-fill {
    height: 22px;
    background: #58a6ff;
    width: 0%;
    border-radius: 10px;
    transition: width 1.2s ease-in-out;
  }
  body.dark .skill-fill {
    background: #22c55e;
  }

  /* Proyectos */
  .proyectos-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(280px,1fr));
    gap: 1.8rem;
  }
  .proyecto {
    background: #161b22cc;
    border-radius: 14px;
    box-shadow: 0 4px 12px rgb(21 31 41 / 0.6);
    padding: 1.5rem;
    color: #c9d1d9;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    transition: box-shadow 0.3s ease;
    cursor: default;
    position: relative;
    overflow: hidden;
  }
  .proyecto:hover {
    box-shadow: 0 10px 25px rgb(88 166 255 / 0.8);
  }
  body.dark .proyecto {
    background: #f0f4f8cc;
    color: #d7dce6;
    box-shadow: 0 4px 12px rgb(160 170 186 / 0.5);
  }
  body.dark .proyecto:hover {
    box-shadow: 0 10px 25px rgb(34 197 94 / 0.8);
  }
  .proyecto img {
    max-width: 100%;
    border-radius: 10px;
    margin-bottom: 1rem;
    pointer-events: none;
  }
  .proyecto h3 {
    margin: 0 0 0.6rem 0;
    font-size: 1.3rem;
  }
  .proyecto p {
    flex-grow: 1;
    font-size: 1rem;
    line-height: 1.4;
  }
  .proyecto button {
    margin-top: 1rem;
    align-self: flex-start;
    background: #58a6ff;
    color: #0d1117;
    border: none;
    font-weight: 700;
    padding: 0.5rem 1.1rem;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  .proyecto button:hover,
  .proyecto button:focus {
    background: #1f6feb;
    outline: none;
  }
  body.dark .proyecto button {
    background: #22c55e;
    color: #e0e3e7;
  }
  body.dark .proyecto button:hover,
  body.dark .proyecto button:focus {
    background: #159e3a;
  }

  /* Modal */
  #modal {
    display: none;
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(13,17,23,0.9);
    backdrop-filter: saturate(180%) blur(10px);
    justify-content: center;
    align-items: center;
    z-index: 100000;
  }
  #modal.active {
    display: flex;
  }
  #modal .modal-content {
    background: #0d1117;
    color: #c9d1d9;
    max-width: 720px;
    width: 90%;
    padding: 2rem 2.5rem;
    border-radius: 18px;
    position: relative;
    box-shadow: 0 8px 30px rgb(88 166 255 / 0.5);
    overflow-y: auto;
    max-height: 80vh;
  }
  body.dark #modal .modal-content {
    background: #f0f4f8;
    color: #0b1220;
    box-shadow: 0 8px 30px rgb(34 197 94 / 0.5);
  }
  #modal .close-btn {
    position: absolute;
    top: 16px;
    right: 22px;
    background: transparent;
    border: none;
    font-size: 2.2rem;
    font-weight: 700;
    cursor: pointer;
    color: #58a6ff;
    transition: color 0.3s ease;
  }
  #modal .close-btn:hover,
  #modal .close-btn:focus {
    color: #1f6feb;
    outline: none;
  }
  body.dark #modal .close-btn {
    color: #22c55e;
  }
  body.dark #modal .close-btn:hover,
  body.dark #modal .close-btn:focus {
    color: #159e3a;
  }
  #modal img {
    max-width: 100%;
    border-radius: 12px;
    margin: 1.2rem 0;
    box-shadow: 0 4px 16px rgb(88 166 255 / 0.7);
  }
  body.dark #modal img {
    box-shadow: 0 4px 16px rgb(34 197 94 / 0.7);
  }
  #modal h3 {
    margin-top: 0;
  }

  /* Contacto */
  form {
    max-width: 550px;
  }
  form input, form textarea {
    width: 100%;
    padding: 0.8rem;
    margin-bottom: 1.2rem;
    border-radius: 10px;
    border: 2px solid #30363d;
    font-size: 1.1rem;
    font-family: 'Montserrat', sans-serif;
    background: #161b22cc;
    color: #c9d1d9;
    transition: border-color 0.3s ease;
  }
  form input:focus, form textarea:focus {
    border-color: #58a6ff;
    outline: none;
  }
  body.dark form input, 
  body.dark form textarea {
    background: #f0f4f8cc;
    border-color: #a0aaba;
    color: #0b1220;
  }
  body.dark form input:focus, 
  body.dark form textarea:focus {
    border-color: #22c55e;
  }
  form button {
    background: #58a6ff;
    color: #0d1117;
    border: none;
    padding: 0.8rem 1.8rem;
    border-radius: 12px;
    font-weight: 700;
    font-size: 1.1rem;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  form button:hover, form button:focus {
    background: #1f6feb;
    outline: none;
  }
  body.dark form button {
    background: #22c55e;
    color: #0b1220;
  }
  body.dark form button:hover, 
  body.dark form button:focus {
    background: #159e3a;
  }

  /* Redes sociales */
  .redes {
    margin-top: 1rem;
  }
  .redes p {
    margin-bottom: 0.6rem;
    font-weight: 700;
  }
  .redes a {
    margin-right: 1.5rem;
    font-weight: 600;
    font-size: 1.1rem;
    color: #58a6ff;
  }
  .redes a:hover,
  .redes a:focus {
    color: #1f6feb;
    outline: none;
  }
  body.dark .redes a {
    color: #22c55e;
  }
  body.dark .redes a:hover,
  body.dark .redes a:focus {
    color: #159e3a;
  }

  /* Botón modo oscuro */
  #theme-toggle {
    position: fixed;
    bottom: 1.2rem;
    right: 1.2rem;
    background: #58a6ff;
    border: none;
    padding: 0.9rem 1rem;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 10px #58a6ffaa;
    font-size: 1.3rem;
    color: #0d1117;
    transition: background-color 0.3s ease, color 0.3s ease;
    z-index: 99999;
  }
  #theme-toggle:hover,
  #theme-toggle:focus {
    background: #1f6feb;
    outline: none;
  }
  body.dark #theme-toggle {
    background: #22c55e;
    color: #0b1220;
    box-shadow: 0 0 10px #22c55eaa;
  }
  body.dark #theme-toggle:hover,
  body.dark #theme-toggle:focus {
    background: #159e3a;
  }

  /* Juego */
  #juego-section {
    text-align: center;
  }
  #snake-canvas {
    background: rgba(13,17,23,0.7);
    border: 3px solid #58a6ff;
    border-radius: 14px;
    display: block;
    margin: 1.5rem auto;
    box-shadow: 0 0 12px #58a6ffaa;
  }
  body.dark #snake-canvas {
    background: rgba(240,244,248,0.7);
    border-color: #22c55e;
    box-shadow: 0 0 12px #22c55eaa;
  }
  #score {
    font-weight: 700;
    font-size: 1.4rem;
    margin: 1rem 0 1.6rem 0;
  }
  #restart-btn {
    background: #58a6ff;
    color: #0d1117;
    border: none;
    padding: 0.75rem 1.8rem;
    border-radius: 12px;
    font-weight: 700;
    cursor: pointer;
    font-size: 1.1rem;
    box-shadow: 0 0 10px #58a6ffaa;
    transition: background-color 0.3s ease;
  }
  #restart-btn:hover,
  #restart-btn:focus {
    background: #1f6feb;
    outline: none;
  }
  body.dark #restart-btn {
    background: #22c55e;
    color: #0b1220;
    box-shadow: 0 0 10px #22c55eaa;
  }
  body.dark #restart-btn:hover,
  body.dark #restart-btn:focus {
    background: #159e3a;
  }
  /* Fondo con filtro oscuro para el body */
body {
  color: #c9d1d9;
  background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)),
    url('https://images.unsplash.com/photo-1519389950473-47ba0277781c?auto=format&fit=crop&w=1920&q=80') no-repeat center center fixed;
  background-size: cover;
  transition: background-color 0.3s ease, color 0.3s ease;
}

body.dark {
  color: #0b1220;
  background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2)),
    url('https://images.unsplash.com/photo-1504384308090-c894fdcc538d?auto=format&fit=crop&w=1920&q=80') no-repeat center center fixed;
  background-size: cover;
}

/* Footer */
footer {
  background-color: rgba(15, 23, 42, 0.85); /* azul oscuro translúcido */
  color: #c9d1d9;
  text-align: center;
  padding: 1em 0;
  position: relative;
  bottom: 0;
  width: 100%;
  font-size: 0.9rem;
  box-shadow: 0 -2px 8px rgba(0,0,0,0.4);
  transition: background-color 0.3s ease, color 0.3s ease;
}

body.dark footer {
  background-color: rgba(240, 244, 248, 0.95);
  color: #0b1220;
  box-shadow: 0 -2px 8px rgba(0,0,0,0.15);
}

.footer-container {
  max-width: 1000px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 1em;
  flex-wrap: wrap;
}

.footer-redes a {
  margin-left: 1em;
  display: inline-block;
  vertical-align: middle;
}

.footer-redes img {
  width: 24px;
  height: 24px;
  filter: brightness(90%);
  transition: filter 0.3s ease;
}

.footer-redes a:hover img,
.footer-redes a:focus img {
  filter: brightness(130%);
  outline: none;
}

section {
  margin-bottom: 100px; /* o el espacio que prefieras, ejemplo 80px */
  padding-top: 80px; /* para que cuando navegues, no quede tan pegado arriba */
  scroll-margin-top: 80px; /* importante para que el scroll no tape el contenido con el header */
}

</style>
</head>
<body>

<nav>
  <div class="logo" tabindex="0">Oscar</div>
  <div id="menu-toggle" aria-label="Abrir menú" role="button" tabindex="0" aria-expanded="false" aria-controls="menu">
    <span></span>
    <span></span>
    <span></span>
  </div>
  <ul id="menu" role="menu" aria-hidden="true">
    <li><button role="menuitem" data-scroll="sobre">Sobre mí</button></li>
    <li><button role="menuitem" data-scroll="habilidades">Habilidades</button></li>
    <li><button role="menuitem" data-scroll="proyectos">Proyectos</button></li>
    <li><button role="menuitem" data-scroll="contacto">Contacto</button></li>
    <li><button role="menuitem" data-scroll="juego">Juego</button></li>
  </ul>
</nav>

<main>
  <section id="sobre" tabindex="0" aria-label="Sección Sobre mí">
    <h2>Sobre mí</h2>
    <p>
      Hola, soy Oscar, estudiante y apasionado de la informática. Me especializo en desarrollo web, programación y diseño de soluciones tecnológicas eficientes y modernas. Me encanta aprender nuevas tecnologías y crear proyectos que resuelvan problemas reales.
    </p>
  </section>

  <section id="habilidades" tabindex="0" aria-label="Sección Habilidades">
    <h2>Habilidades</h2>
    <div class="skill">
      <div class="skill-label">HTML &amp; CSS</div>
      <div class="skill-bar"><div class="skill-fill" data-level="90%"></div></div>
    </div>
    <div class="skill">
      <div class="skill-label">JavaScript</div>
      <div class="skill-bar"><div class="skill-fill" data-level="85%"></div></div>
    </div>
    <div class="skill">
      <div class="skill-label">React.js</div>
      <div class="skill-bar"><div class="skill-fill" data-level="75%"></div></div>
    </div>
    <div class="skill">
      <div class="skill-label">Node.js</div>
      <div class="skill-bar"><div class="skill-fill" data-level="70%"></div></div>
    </div>
  </section>

  <section id="proyectos" tabindex="0" aria-label="Sección Proyectos">
    <h2>Proyectos</h2>
    <div class="proyectos-grid">
      <div class="proyecto">
        <img src="https://cdn.pixabay.com/photo/2016/11/19/14/00/code-1839406_960_720.jpg" alt="Proyecto 1: Página Web Personal" />
        <h3>Página Web Personal</h3>
        <p>Diseño y desarrollo de una página web personal con HTML, CSS y JavaScript puro para mostrar mis habilidades y proyectos.</p>
        <button class="ver-proyecto-btn" data-title="Página Web Personal" data-img="https://cdn.pixabay.com/photo/2016/11/19/14/00/code-1839406_960_720.jpg" data-desc="Este proyecto es una página web personal con diseño responsivo, efectos visuales y formulario de contacto.">Ver Proyecto</button>
      </div>
      <div class="proyecto">
        <img src="https://cdn.pixabay.com/photo/2017/01/20/00/30/programming-1996489_960_720.jpg" alt="Proyecto 2: Aplicación ToDo" />
        <h3>Aplicación ToDo</h3>
        <p>Aplicación web para gestionar tareas diarias usando React.js y almacenamiento local para persistencia.</p>
        <button class="ver-proyecto-btn" data-title="Aplicación ToDo" data-img="https://cdn.pixabay.com/photo/2017/01/20/00/30/programming-1996489_960_720.jpg" data-desc="Una aplicación para gestionar listas de tareas con React, usando hooks y LocalStorage para guardar datos.">Ver Proyecto</button>
      </div>
      <div class="proyecto">
        <img src="https://cdn.pixabay.com/photo/2018/05/08/08/23/technology-3389886_960_720.jpg" alt="Proyecto 3: Blog Tecnológico" />
        <h3>Blog Tecnológico</h3>
        <p>Blog donde comparto artículos técnicos, tutoriales y noticias del mundo informático.</p>
        <button class="ver-proyecto-btn" data-title="Blog Tecnológico" data-img="https://cdn.pixabay.com/photo/2018/05/08/08/23/technology-3389886_960_720.jpg" data-desc="Plataforma de blog desarrollada con Gatsby y Markdown para escribir contenido técnico y noticias.">Ver Proyecto</button>
      </div>
    </div>
  </section>

  <section id="contacto" tabindex="0" aria-label="Sección Contacto">
    <h2>Contacto</h2>
    <form id="contact-form" novalidate>
      <input type="text" name="nombre" id="nombre" placeholder="Nombre completo" required aria-required="true" aria-describedby="nombre-error" />
      <div id="nombre-error" class="error-msg" style="color:#e11d48; display:none;">Por favor ingresa tu nombre.</div>

      <input type="email" name="email" id="email" placeholder="Correo electrónico" required aria-required="true" aria-describedby="email-error" />
      <div id="email-error" class="error-msg" style="color:#e11d48; display:none;">Por favor ingresa un correo válido.</div>

      <textarea name="mensaje" id="mensaje" rows="5" placeholder="Mensaje" required aria-required="true" aria-describedby="mensaje-error"></textarea>
      <div id="mensaje-error" class="error-msg" style="color:#e11d48; display:none;">El mensaje no puede estar vacío.</div>

      <button type="submit">Enviar</button>
    </form>
    <div class="redes" aria-label="Redes sociales de contacto">
      <p>Contáctame en redes:</p>
      <a href="https://github.com/" target="_blank" rel="noopener noreferrer" aria-label="GitHub de Oscar">GitHub</a>
      <a href="https://linkedin.com/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn de Oscar">LinkedIn</a>
      <a href="https://twitter.com/" target="_blank" rel="noopener noreferrer" aria-label="Twitter de Oscar">Twitter</a>
    </div>
  </section>

  <section id="juego" tabindex="0" aria-label="Sección Juego Gusanito">
    <h2>Mini Juego: Gusanito</h2>
    <canvas id="snake-canvas" width="400" height="400" aria-label="Lienzo del juego Gusanito"></canvas>
    <div id="score" aria-live="polite">Puntaje: 0</div>
    <button id="restart-btn">Reiniciar Juego</button>
  </section>
  
</main>
<!-- Agrega esto justo antes de cerrar el </body> -->

<footer>
  <div class="footer-container">
    <p>© 2025 Oscar - Portafolio Informático</p>
    <div class="footer-redes" aria-label="Redes sociales en el pie de página">
      <a href="https://github.com/" target="_blank" rel="noopener noreferrer" aria-label="GitHub de Oscar">
        <img src="https://cdn-icons-png.flaticon.com/24/733/733553.png" alt="Icono GitHub" />
      </a>
      <a href="https://linkedin.com/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn de Oscar">
        <img src="https://cdn-icons-png.flaticon.com/24/174/174857.png" alt="Icono LinkedIn" />
      </a>
      <a href="https://twitter.com/" target="_blank" rel="noopener noreferrer" aria-label="Twitter de Oscar">
        <img src="https://cdn-icons-png.flaticon.com/24/733/733579.png" alt="Icono Twitter" />
      </a>
    </div>
  </div>
</footer>


<!-- Modal Proyecto -->
<div id="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-desc">
  <div class="modal-content">
    <button class="close-btn" aria-label="Cerrar modal">&times;</button>
    <h3 id="modal-title"></h3>
    <img id="modal-img" src="" alt="Imagen del proyecto" />
    <p id="modal-desc"></p>
  </div>
</div>

<!-- Botón modo oscuro -->
<button id="theme-toggle" aria-label="Cambiar tema oscuro/claro" title="Cambiar tema oscuro/claro">🌓</button>

<script>
  // Toggle menú hamburguesa
  const menuToggle = document.getElementById('menu-toggle');
  const menu = document.getElementById('menu');

  menuToggle.addEventListener('click', () => {
    const expanded = menuToggle.getAttribute('aria-expanded') === 'true' || false;
    menuToggle.setAttribute('aria-expanded', !expanded);
    menu.classList.toggle('active');
  });

  // Cerrar menú al hacer click en enlace
  menu.querySelectorAll('button[data-scroll]').forEach(btn => {
    btn.addEventListener('click', () => {
      menu.classList.remove('active');
      menuToggle.setAttribute('aria-expanded', false);
    });
  });

  // Scroll suave y animaciones fade-in
  const sections = document.querySelectorAll('section');
  const skillFills = document.querySelectorAll('.skill-fill');

  document.querySelectorAll('button[data-scroll]').forEach(btn => {
    btn.addEventListener('click', () => {
      const id = btn.getAttribute('data-scroll');
      const target = document.getElementById(id);
      if(target){
        target.focus();
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });
  });

  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if(entry.isIntersecting){
        entry.target.classList.add('visible');
        // Animar barras de habilidades cuando visible
        if(entry.target.id === 'habilidades'){
          skillFills.forEach(fill => {
            const level = fill.getAttribute('data-level');
            fill.style.width = level;
          });
        }
      }
    });
  }, { threshold: 0.3 });

  sections.forEach(section => observer.observe(section));

  // Modal de proyectos
  const modal = document.getElementById('modal');
  const modalTitle = document.getElementById('modal-title');
  const modalImg = document.getElementById('modal-img');
  const modalDesc = document.getElementById('modal-desc');
  const closeBtn = modal.querySelector('.close-btn');

  document.querySelectorAll('.ver-proyecto-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      modalTitle.textContent = btn.getAttribute('data-title');
      modalImg.src = btn.getAttribute('data-img');
      modalDesc.textContent = btn.getAttribute('data-desc');
      modal.classList.add('active');
      modal.focus();
    });
  });
  closeBtn.addEventListener('click', () => {
    modal.classList.remove('active');
  });
  window.addEventListener('keydown', e => {
    if(e.key === "Escape" && modal.classList.contains('active')){
      modal.classList.remove('active');
    }
  });

  // Formulario con validación simple
  const form = document.getElementById('contact-form');
  const nombre = document.getElementById('nombre');
  const email = document.getElementById('email');
  const mensaje = document.getElementById('mensaje');

  const nombreError = document.getElementById('nombre-error');
  const emailError = document.getElementById('email-error');
  const mensajeError = document.getElementById('mensaje-error');

  function validarEmail(email) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
  }

  form.addEventListener('submit', e => {
    e.preventDefault();

    let valid = true;

    if(nombre.value.trim() === '') {
      nombreError.style.display = 'block';
      valid = false;
    } else {
      nombreError.style.display = 'none';
    }

    if(!validarEmail(email.value.trim())) {
      emailError.style.display = 'block';
      valid = false;
    } else {
      emailError.style.display = 'none';
    }

    if(mensaje.value.trim() === '') {
      mensajeError.style.display = 'block';
      valid = false;
    } else {
      mensajeError.style.display = 'none';
    }

    if(valid){
      alert("Gracias por tu mensaje, pronto te responderé.");
      form.reset();
    }
  });

  // Toggle modo oscuro/claro
  const themeToggle = document.getElementById('theme-toggle');
  const body = document.body;
  const darkClass = 'dark';

  // Guardar modo en localStorage para persistencia
  if(localStorage.getItem('theme') === 'dark'){
    body.classList.add(darkClass);
  }

  themeToggle.addEventListener('click', () => {
    body.classList.toggle(darkClass);
    if(body.classList.contains(darkClass)){
      localStorage.setItem('theme', 'dark');
    } else {
      localStorage.setItem('theme', 'light');
    }
  });

  // Juego Gusanito
  const canvas = document.getElementById('snake-canvas');
  const ctx = canvas.getContext('2d');
  const grid = 20;
  let snake = [{x: 9*grid, y: 9*grid}];
  let dx = grid;
  let dy = 0;
  let food = {};
  let score = 0;
  let gameOver = false;

  function placeFood(){
    food.x = Math.floor(Math.random() * (canvas.width/grid)) * grid;
    food.y = Math.floor(Math.random() * (canvas.height/grid)) * grid;
    if(snake.some(s => s.x === food.x && s.y === food.y)){
      placeFood();
    }
  }

  function draw(){
    // Fondo con transparencia según tema
    ctx.fillStyle = getComputedStyle(document.body).backgroundColor;
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // Serpiente
    ctx.fillStyle = body.classList.contains(darkClass) ? "#22c55e" : "#0ea5e9";
    snake.forEach((segment,i) => {
      ctx.fillRect(segment.x, segment.y, grid-2, grid-2);
      if(i===0){
        ctx.fillStyle = body.classList.contains(darkClass) ? "#16a34a" : "#0284c7";
      }
    });

    // Comida
    ctx.fillStyle = body.classList.contains(darkClass) ? "#f87171" : "#e11d48";
    ctx.fillRect(food.x, food.y, grid-2, grid-2);
  }

  function moveSnake(){
    const head = {x: snake[0].x + dx, y: snake[0].y + dy};
    if(head.x < 0 || head.x >= canvas.width || head.y < 0 || head.y >= canvas.height){
      gameOver = true;
      return;
    }
    if(snake.some((seg,i) => i !== 0 && seg.x === head.x && seg.y === head.y)){
      gameOver = true;
      return;
    }
    snake.unshift(head);

    if(head.x === food.x && head.y === food.y){
      score++;
      document.getElementById('score').textContent = "Puntaje: " + score;
      placeFood();
    } else {
      snake.pop();
    }
  }

  function gameLoop(){
    if(gameOver){
      ctx.font = "26px Montserrat, sans-serif";
      ctx.fillStyle = body.classList.contains(darkClass) ? "#f87171" : "#e11d48";
      ctx.textAlign = "center";
      ctx.fillText("Game Over! Puntaje: " + score, canvas.width/2, canvas.height/2);
      return;
    }
    moveSnake();
    draw();
  }

  let intervalId = null;
  function startGame(){
    snake = [{x: 9*grid, y: 9*grid}];
    dx = grid;
    dy = 0;
    score = 0;
    gameOver = false;
    document.getElementById('score').textContent = "Puntaje: 0";
    placeFood();
    if(intervalId) clearInterval(intervalId);
    intervalId = setInterval(gameLoop, 120);
  }
  startGame();

  window.addEventListener('keydown', e => {
    if(gameOver) return;
    switch(e.key){
      case "ArrowUp":
      case "w":
        if(dy === 0){
          dx = 0; dy = -grid;
        }
        break;
      case "ArrowDown":
      case "s":
        if(dy === 0){
          dx = 0; dy = grid;
        }
        break;
      case "ArrowLeft":
      case "a":
        if(dx === 0){
          dx = -grid; dy = 0;
        }
        break;
      case "ArrowRight":
      case "d":
        if(dx === 0){
          dx = grid; dy = 0;
        }
        break;
    }
  });

  document.getElementById('restart-btn').addEventListener('click', startGame);
</script>

</body>
</html>
